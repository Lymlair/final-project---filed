"use strict";require(["config"],function(){require(["jquery","header","cookie","allPrc","add-reduce","getNum"],function(h,e,c,n){function o(){var e=h("#goodsPrice").allPrc(),c=parseInt(h("#yunfei").html());h("#goodsPrice").html(e),h("#payPrice").html(e+c)}new Promise(function(e,c){h("header").load("/html/component/header.html",function(){e()})}).then(function(){h("footer").load("/html/component/footer.html"),e.init(),e.searchInput(),e.listmenu(),e.listMenuMove()}).then(function(){o()}).then(function(){if(h.cookie("cart")){h(".cart").css("display","block"),h(".nonitem").css("display","none");var e=JSON.parse(h.cookie("cart"));console.log(e);for(var c=0;c<e.length;c++){var n=h(".one").eq(0).clone(!0).appendTo(h(".cart"));n.find(".item-name").html(e[c].name),n.find(".price").html("￥"+e[c].price),n.find(".itemNum").html(e[c].num),n.attr("id",e[c].no);var o=parseInt(n.find(".price").html().split("￥")[1]),t=e[c].num;n.find(".allprice").html("￥"+t*o),n.find(".itemNum").addReduce()}h(".all-check").appendTo(h(".cart")),h("#none").css("display","none")}else h(".cart").css("display","none"),h(".nonitem").css("display","block")}).then(function(){h("#allChk").on("change",function(){h(this).is(":checked")?(h("#allChkk").prop("checked","checked"),h(".oneChk").prop("checked","checked")):(h(".oneChk").removeAttr("checked"),h("#allChkk").removeAttr("checked"))}),h(".oneChk").each(function(){h(this).on("change",function(){var e=!0;if(0==h(this).prop("checked"))h("#allChk").removeAttr("checked"),h("#allChkk").removeAttr("checked");else{for(var c=1;c<h(".oneChk").length;c++)if(0==h(".oneChk").eq(c).prop("checked")){e=!1;break}e&&(h("#allChkk").prop("checked","checked"),h("#allChk").prop("checked","checked"))}})}),h("#allChkk").on("change",function(){h(this).is(":checked")?(h("#allChk").prop("checked","checked"),h(".oneChk").prop("checked","checked")):(h(".oneChk").removeAttr("checked"),h("#allChk").removeAttr("checked"))})}).then(function(){h(".oneChk").on("change",function(){o(),h(this).getNum()}),h("#allChk").on("change",function(){o(),h(this).getNum()}),h("#allChkk").on("change",function(){o(),h(this).getNum()}),h("span").on("click",function(){o()})}).then(function(){h("#del").on("click",function(){if(h("#allChkk").prop("checked")&&confirm("您确定要删除所有商品吗？")){h.cookie("cart","",{expires:-1,path:"/"});var e=setInterval(function(){window.location.reload(),clearInterval(e)},1e3)}})})})});